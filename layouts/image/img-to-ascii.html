{{ define "main" }}
<style>
    .width-control input {
        font-size: 16px;
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: 80px;
        text-align: center;
        margin-bottom: 10px;
    }
</style>
<div class="container">
    <h1>Transform Your Images into Stunning ASCII Art with Our Easy-to-Use Converter</h1>
    <p>Convert your images into high-quality ASCII art effortlessly with our online tool. Customize width and detail to
        generate unique text-based artwork instantly.</p>

    <div class="upload-box" id="uploadBox">
        <input type="file" id="fileInput" accept="image/*"/>
        <p>Drag & drop an image here or <span>browse</span></p>
    </div>

    <div class="width-control">
        <label for="widthInput">Width:</label>
        <input type="number" id="widthInput" value="100" min="10" max="300"/>
    </div>

    <textarea id="asciiOutput" readonly disabled></textarea>
    <div>
        <button class="copy-button" onclick="copyText('asciiOutput', 'copiedMessage1')">
            <span class="copy-icon">ðŸ“‹</span>
        </button>
        <span class="copied-message" id="copiedMessage1">Copied âœ“</span>
    </div>
    <div id="introduction">
        <!-- Introduction -->
        <section style="text-align: left;">
            <h1>Transform Images to High-Quality ASCII Art Online for Free</h1>
            <p>Welcome to our <strong>free online ASCII art converter</strong>, where you can effortlessly transform your images into high-quality ASCII art. Whether you're a graphic designer, coder, or simply an art enthusiast, our tool offers a seamless and free solution to convert your images into unique text-based art.</p>
        </section>

        <!-- How It Works -->
        <section id="how-it-works" style="text-align: left;">
            <h2>How It Works</h2>
            <div>
                <h3>1. Upload Your Image:</h3>
                <p>Simply drag and drop your image or select it from your device using our easy-to-use upload box. We support a variety of image formats, ensuring compatibility with most of your files.</p>
            </div>
            <div>
                <h3>2. Adjust the Width:</h3>
                <p>Customize the width of your ASCII art output to fit your needs. Use our width input slider to fine-tune the dimensions and get the perfect result. Our tool automatically updates the ASCII art as you adjust the width, providing you with real-time feedback.</p>
            </div>
            <div>
                <h3>3. Generate and View ASCII Art:</h3>
                <p>Once you've uploaded your image and set your desired width, our converter processes the image and generates the ASCII art. View the result instantly in our sleek, light-themed output display, optimized for readability and detail.</p>
            </div>
        </section>

        <!-- Why Choose Our Tool -->
        <section id="why-choose" style="text-align: left;">
            <h2>Why Choose Our Tool?</h2>
            <ul>
                <li><strong>High-Quality Output:</strong> Our converter ensures that the ASCII art you get is of the highest quality, preserving the details and nuances of your original image.</li>
                <li><strong>Completely Free:</strong> Enjoy unlimited use of our ASCII art converter without any cost. No hidden fees, no sign-ups required.</li>
                <li><strong>User-Friendly Interface:</strong> With a clean and modern design, our tool is easy to navigate and use, making the conversion process smooth and enjoyable.</li>
                <li><strong>Customizable Options:</strong> Tailor the output to your exact specifications with adjustable width and instant preview features.</li>
            </ul>
        </section>

        <!-- FAQ -->
        <section id="faq" style="text-align: left;">
            <h2>Frequently Asked Questions (FAQ)</h2>
            <div class="faq-item">
                <h3>Is there a limit to the file size I can upload?</h3>
                <p>Our tool supports image files up to 10MB in size. For larger files, consider resizing your image before uploading.</p>
            </div>
            <div class="faq-item">
                <h3>Can I use the ASCII art generated for commercial purposes?</h3>
                <p>Yes, the ASCII art created using our tool can be used for personal and commercial purposes. However, we recommend checking the usage rights of the original image.</p>
            </div>
            <div class="faq-item">
                <h3>Do I need to create an account to use the converter?</h3>
                <p>No, you donâ€™t need to create an account. Our converter is completely free and accessible to everyone without any registration.</p>
            </div>
            <div class="faq-item">
                <h3>How does the width adjustment affect the ASCII art?</h3>
                <p>Adjusting the width changes the size of the ASCII art, which can affect the level of detail and clarity. A larger width provides more detail, while a smaller width results in a more compact representation.</p>
            </div>
            <div class="faq-item">
                <h3>Can I save or share my ASCII art?</h3>
                <p>You can easily copy the ASCII art from the output box and paste it wherever you like. For saving, you can use standard text-saving methods or take a screenshot of the output.</p>
            </div>
        </section>

    </div>
</div>

<script>
    const uploadBox = document.getElementById('uploadBox');
    const fileInput = document.getElementById('fileInput');
    const asciiOutput = document.getElementById('asciiOutput');
    const widthInput = document.getElementById('widthInput');

    uploadBox.addEventListener('click', () => {
        fileInput.click();
    });

    uploadBox.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadBox.style.borderColor = '#007bff';
        uploadBox.style.backgroundColor = '#f0f8ff';
    });

    uploadBox.addEventListener('dragleave', () => {
        uploadBox.style.borderColor = '#aaa';
        uploadBox.style.backgroundColor = '#f9f9f9';
    });

    uploadBox.addEventListener('drop', (e) => {
        e.preventDefault();
        handleFileUpload(e.dataTransfer.files[0]);
        uploadBox.style.borderColor = '#aaa';
        uploadBox.style.backgroundColor = '#f9f9f9';
    });

    fileInput.addEventListener('change', () => {
        handleFileUpload(fileInput.files[0]);
    });
    widthInput.addEventListener('input', () => {
        if (fileInput.files.length > 0) {
            handleFileUpload(fileInput.files[0]);
        }
    });

    function handleFileUpload(file) {
        const reader = new FileReader();

        reader.onload = function (event) {
            const image = new Image();
            image.src = event.target.result;

            image.onload = function () {
                const width = parseInt(widthInput.value, 10);
                const ascii = imageToAscii(image, width);  // You can adjust the width as needed
                asciiOutput.textContent = ascii;
            };
        };
        reader.readAsDataURL(file);

    }

    function imageToAscii(image, width = 100) {
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');

        const aspectRatio = image.height / image.width;
        canvas.width = width;
        canvas.height = width * aspectRatio;

        context.drawImage(image, 0, 0, canvas.width, canvas.height);

        const imageData = context.getImageData(0, 0, canvas.width, canvas.height).data;
        const characters = '@%#*+=-:. ';
        let ascii = '';

        for (let i = 0; i < imageData.length; i += 4) {
            const r = imageData[i];
            const g = imageData[i + 1];
            const b = imageData[i + 2];
            const brightness = (r + g + b) / 3;
            const charIndex = Math.floor((brightness / 255) * (characters.length - 1));
            ascii += characters[charIndex];

            // Add a newline after every row
            if ((i / 4 + 1) % canvas.width === 0) {
                ascii += '\n';
            }
        }

        return ascii;
    }

    // function copyText(textAreaId, messageId) {
    //     const textArea = document.getElementById(textAreaId);
    //     const message = document.getElementById(messageId);
    //
    //     textArea.select();
    //     document.execCommand('copy');
    //
    //     message.style.opacity = 1;
    //     setTimeout(() => {
    //         message.style.opacity = 0;
    //     }, 1000);
    // }
</script>
{{ end }}
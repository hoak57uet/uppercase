{{ define "main" }}
<style>
    .wheel-container {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    .values-wheel {
    }

    /* Right wheel section styling */
    #wheelCanvas {
        border-radius: 50%;
        background-color: #ffffff;
        margin: auto;
        box-shadow: 0 5px 7px rgba(0, 0, 0, 0.2);
    }

    #arrow {
        align-self: center;
        width: 0;
        height: 0;
        border-left: 7px solid transparent;
        border-right: 7px solid transparent;
        border-top: 14px solid #E63946; /* Modern red arrow */
    }

    #result {
        margin-top: 20px;
        font-size: 20px;
        font-weight: bold;
        color: #555;
        width: 100%;
        min-height: 50px;
    }

    .values-wheel {
        display: flex;
        gap: 20px;
    }

    .sub-container {
        margin: auto;
        background-color: #fff;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    /* Left input section styling */
    #inputValues {
        flex-grow: 1;
        padding: 15px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        outline: none;
        font-size: 14px;
        color: #333;
        background-color: #f4f4f4;
        margin-bottom: 15px;
    }

    .shuffle-btn {
        width: 100px;
        display: inline-flex;
        align-items: center;
        background-color: #17a2b8;
        color: white;
        border: none;
        font-size: 14px;
        cursor: pointer;
        border-radius: 5px;
        transition: background-color 0.3s ease;
        padding: 8px;
    }

    .shuffle-btn:hover {
        background-color: #007bff;
    }

    .shuffle-btn i {
        margin-right: 8px;
    }

    .option-values {
        display: flex;
        align-items: center;
        font-size: 14px;
        font-style: italic;
        margin-bottom: 10px;
    }

    .wheel-wrapper {
        flex-grow: 1;
        display: flex;
        padding: 10px;
        box-sizing: border-box;
    }

    #create-wheel-btn {
        background: #17a2b8;
    }

    #create-wheel-btn:hover {
        background-color: #007bff;
    }

    .btn-start-spin {
        font-weight: bold;
    }

    #result-area {
        width: 100%;
        height: 150px;
        background: #f0f0f0;
    }

    button:disabled {
        background-color: #cccccc;
        color: #666666;
        cursor: not-allowed;
        opacity: 0.6;
    }

    .popup {
        visibility: hidden;
        display: flex;
        flex-direction: column;
        position: fixed;
        width: 500px;
        height: 300px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        text-align: center;
        z-index: 20;
    }

    #popup-content {
        flex-grow: 1;
        font-size: 60px;
        font-weight: bold;
        color: #007bff;
    }

    .fireworks-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 999;
        pointer-events: none;
    }

    #short-values {
        display: none;
    }
    @media screen and (max-width: 1080px) {
        .sub-container {
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }

        .values-wheel {
            display: flex;
            flex-direction: column;
            height: fit-content;
        }

        #arrow {
            left: 240px; /* Adjust arrow position for smaller screens */
        }

        #result {
            margin-top: 0px;
        }

        #wheelCanvas {
            width: 100%;
        }

        .btn-start-spin {
            margin-top: 10px;
        }

        #label-values::after {
            content: '\25BC';
            font-size: 12px;
            float: right;
            transition: transform 0.3s ease;
        }

        #label-values.active::after {
            transform: rotate(-180deg);
        }

        #values-content {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        #short-values {
            display: flex;
            flex-direction: column;
        }

        #short-values-names {
            font-style: italic;
            font-size: 12px;
            color: blue;
        }

        #short-remove-after-chosen {
            font-style: italic;
            font-size: 11px;
            color: red;
        }
    }
</style>
<script src="/js/Winwheel.min.js"></script>
<!-- Include TweenMax.js for animations -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fireworks-js/dist/fireworks.min.js"></script>
<div id="fireworksContainer" class="fireworks-container"></div>
<div class="container">
    <div id="popup" class="popup">
        <h1>Congratulation!</h1>
        <span id="popup-content"></span>
        <button id="closeBtn" class="large">Close</button>
    </div>
    <h1>Random Name Picker with Spinning Wheel</h1>
    <div class="sub-container">
        <div class="values-wheel">
            <!-- Left side input -->
            <div class="wheel-container">
                <a id="label-values" class="label active">Enter Values (one per line):</a>
                <div id="values-content" class="wheel-container">
                    <textarea id="inputValues" placeholder="Enter values..."></textarea>
                    <div class="option-values">
                        <button class="shuffle-btn" onclick="shuffle()">
                            <i class="fas fa-random"></i> Shuffle
                        </button>
                        <label><input type="checkbox" id="removeAfterChosen" checked> Remove after Chosen</label>
                    </div>
                    <button class="large" id="create-wheel-btn" onclick="setupWheel()">Create Wheel</button>
                </div>
                <div id="short-values">
                    <span id="short-values-names"></span>
                    <span id="short-remove-after-chosen"></span>
                </div>
            </div>

            <!-- Right side wheel -->
            <div class="wheel-container">
                <!-- Arrow pointer -->
                <div id="arrow"></div>
                <div class="wheel-wrapper">
                    <canvas id="wheelCanvas" width="400" height="400"></canvas>
                </div>
                <button class="btn-start-spin large" id="btn-start-spin" onclick="startSpin()">START</button>
            </div>
        </div>
        <h4>Result</h4>
        <div id="result">
            <textarea id="result-area" readonly>
            </textarea>
            <button class="copy-button" onclick="copyText('result-area','btn-copy-result')" id="btn-copy-result">Copy
            </button>
        </div>
    </div>
    <br/><br/>
    <div id="introduction">
        <section>
            <h2>About the Random Name Picker Tool</h2>
            <p>Our Random Name Picker tool is an easy and fun way to make random selections. Whether you're in a
                classroom, at work, or hosting a giveaway, this tool helps you select names in a fair and engaging way.
                Just enter the list of names, click 'Create Wheel', and let the wheel spin to choose a lucky winner!</p>

            <h2>How It Works</h2>
            <ol>
                <li><strong>Input Names:</strong> Enter a list of names, one per line, in the text area provided.</li>
                <li><strong>Create Wheel:</strong> Once you've entered the names, click 'Create Wheel' to generate a
                    spinning wheel containing all the names you inputted.
                </li>
                <li><strong>Start the Spin:</strong> Click the 'Start' button to spin the wheel. Watch as it spins and
                    randomly lands on one name.
                </li>
                <li><strong>See the Results:</strong> The selected name will appear below the wheel. The process can be
                    repeated until all names have been picked, and each result will be displayed in the order of spins.
                </li>
            </ol>

            <p>Use the tool for random name picking in classrooms, meetings, or even to make everyday decisions like
                what to eat for dinner!</p>
        </section>
        <section>
            <h2>Frequently Asked Questions (FAQ)</h2>

            <h3>1. What can I use the Random Name Picker for?</h3>
            <p>This tool is perfect for various scenarios such as:
            <ul>
                <li><strong>Classrooms:</strong> Randomly pick which student will answer the next question.</li>
                <li><strong>Giveaways:</strong> Spin the wheel to choose a lucky customer for your monthly prize draw.
                </li>
                <li><strong>Work Meetings:</strong> Use the wheel during daily standup meetings to randomize the
                    speaking order.
                </li>
                <li><strong>Daily Decisions:</strong> Can't decide what to have for dinner? Put your options on the
                    wheel and spin!
                </li>
                <li><strong>Task Management:</strong> Overwhelmed by your to-do list? Add tasks to the wheel and spin to
                    choose which one to tackle first.
                </li>
            </ul>
            </p>

            <h3>2. How does the tool work?</h3>
            <p>Simply enter your list of names (one per line), click 'Create Wheel' to generate a spinning wheel, and
                click 'Start' to spin. The tool will randomly select a name, and the result will be shown below the
                wheel.</p>

            <h3>3. Can I use this tool for multiple rounds?</h3>
            <p>Yes! After each spin, the selected name is removed from the wheel, and you can spin again until all names
                have been picked.</p>

            <h3>4. Is the Random Name Picker tool free?</h3>
            <p>Yes, the tool is completely free to use for all kinds of random selections, from classrooms to giveaways
                and beyond!</p>

            <h3>5. Can I use this tool for other random selections?</h3>
            <p>Definitely! You can input anything you want into the listâ€”not just names. Use it for randomizing tasks,
                events, or anything that requires a random choice.</p>
        </section>


    </div>
</div>

<script>
    let wheel;
    let remainingSegments = [];  // Array to store the remaining segments
    let chosenSegments = [];
    const resultDiv = document.getElementById("result");
    const resultTextArea = document.getElementById("result-area");
    const removeAfterChosen = document.getElementById("removeAfterChosen");
    document.getElementById("inputValues").value = "John\nEmily\nMichael\nSophia\nDavid\n";
    const startButton = document.getElementById("btn-start-spin");
    setupWheel()

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function shuffle() {
        let inputVars = document.getElementById("inputValues").value.trim().split("\n");
        console.log("shuffle...." + shuffleArray(inputVars).join("\n"))
        document.getElementById("inputValues").value = shuffleArray(inputVars).join("\n");
        setupWheel();
    }

    // Function to set up the wheel
    function setupWheel() {
        resultTextArea.textContent = '';
        const inputValues = document.getElementById("inputValues").value.split('\n').filter(value => value.trim() !== '');
        const removeAfterChosen = document.getElementById("removeAfterChosen");
        if (inputValues.length === 0) {
            alert("Please enter some values to spin.");
            return;
        }
        //update short value
        document.getElementById('short-values-names').innerText = inputValues.join(', ')
        document.getElementById('short-remove-after-chosen').innerText = removeAfterChosen ? "Remove After Chosen" : "";
        //clear old result
        chosenSegments = [];
        // Create segments based on input
        remainingSegments = inputValues.map(value => ({
            text: value.trim(),
            fillStyle: getRandomColor()
        }));

        createWheel(remainingSegments);
    }

    // Function to create and update the wheel
    function createWheel(segments) {
        // Initialize the wheel with the remaining segments
        wheel = new Winwheel({
            'canvasId': 'wheelCanvas',
            'numSegments': segments.length,
            'outerRadius': 190,
            'lineWidth': 0,  // Thinner lines for a modern look
            'segments': segments,
            'animation': {
                'type': 'spinToStop',
                'duration': 5,
                'spins': 8,
                'callbackFinished': showResult
            },
            'textFontSize': 18,
            'textOrientation': 'horizontal'
        });
    }

    // Function to spin the wheel
    function startSpin() {
        if (!wheel) {
            alert("Please create the wheel first!");
            return;
        }
        console.log(remainingSegments.length)
        if (remainingSegments.length === 1) {
            alert("Only one choice remains: " + remainingSegments[0].text);
            return;
        }
        //disable button
        startButton.disabled = true;
        wheel.startAnimation();
    }

    // Callback to show the result and update the wheel
    function showResult(indicatedSegment) {
        showChosenPopup(indicatedSegment.text)
        chosenSegments.push(indicatedSegment)
        if (removeAfterChosen.checked) {
            remainingSegments = remainingSegments.filter(segment => segment.text !== indicatedSegment.text);
            createWheel(remainingSegments);
        }
        if (remainingSegments.length === 1) {
            chosenSegments.push(remainingSegments[0])
        }
        resultTextArea.textContent = chosenSegments.map((item, index) => `${index + 1}. ${item.text}`).join('\n');
        startButton.disabled = false;
    }

    function getRandomColor() {
        const modernColors = [
            '#FF5733', // Vibrant Red-Orange
            '#33FF57', // Bright Lime Green
            '#3357FF', // Bold Blue
            '#FF33A6', // Hot Pink
            '#33FFF9', // Electric Cyan
            '#FFC300', // Bright Yellow
            '#DAF7A6', // Light Mint Green
            '#C70039', // Deep Crimson
            '#900C3F', // Wine Red
            '#581845', // Dark Purple
            '#28A745', // Modern Green
            '#007BFF', // Modern Blue
            '#6C757D', // Cool Gray
            '#17A2B8', // Modern Teal
            '#FFC107', // Warm Yellow-Orange
            '#FF6347', // Tomato Red
            '#4682B4', // Steel Blue
            '#FF4500', // Orange Red
            '#FF1493', // Deep Pink
            '#32CD32', // Lime Green
            '#FFD700', // Golden Yellow
            '#1E90FF', // Dodger Blue
            '#FF69B4', // Bright Pink
            '#8A2BE2', // Blue Violet
            '#00FA9A', // Medium Spring Green
            '#ADFF2F', // Green Yellow
            '#DC143C', // Crimson
            '#00CED1', // Dark Turquoise
            '#FF8C00', // Dark Orange
            '#9932CC', // Dark Orchid
            '#00FF7F', // Spring Green
            '#FFB6C1', // Light Pink
            '#F0E68C', // Khaki
            '#B22222', // Firebrick Red
            '#20B2AA', // Light Sea Green
            '#FFA07A', // Light Salmon
            '#4169E1', // Royal Blue
            '#DB7093', // Pale Violet Red
            '#7FFFD4', // Aquamarine
            '#FFE4B5', // Moccasin
            '#00BFFF', // Deep Sky Blue
            '#FF4500', // Orange Red
            '#98FB98', // Pale Green
            '#F08080', // Light Coral
            '#FFDAB9', // Peach Puff
            '#BA55D3', // Medium Orchid
            '#8B0000', // Dark Red
            '#00FF00', // Pure Green
            '#0000FF', // Pure Blue
            '#FFFF00', // Bright Yellow
            '#800080', // Pure Purple
            '#FF00FF', // Fuchsia
            '#FF6347', // Tomato
            '#2E8B57', // Sea Green
            '#8FBC8F', // Dark Sea Green
            '#556B2F', // Olive Drab
            '#F4A460', // Sandy Brown
            '#FA8072', // Salmon
            '#FFDEAD', // Navajo White
            '#FAFAD2', // Light Goldenrod Yellow
            '#D2691E', // Chocolate Brown
            '#DAA520', // Goldenrod
            '#9ACD32', // Yellow Green
            '#00FF7F', // Spring Green
            '#87CEEB', // Sky Blue
            '#DC143C', // Crimson
            '#FFFAF0', // Floral White
            '#778899', // Light Slate Gray
            '#696969', // Dim Gray
            '#6A5ACD', // Slate Blue
            '#00FF00', // Lime
            '#FFFFE0', // Light Yellow
            '#F5F5DC', // Beige
            '#FF7F50', // Coral
            '#7CFC00', // Lawn Green
            '#F0FFF0', // Honeydew
            '#FFFAFA', // Snow
            '#00FFFF', // Cyan
            '#800000', // Maroon
            '#FF00FF', // Magenta
            '#40E0D0', // Turquoise
            '#FF1493', // Deep Pink
            '#DDA0DD', // Plum
            '#8A2BE2', // Blue Violet
            '#5F9EA0', // Cadet Blue
            '#FF4500', // OrangeRed
            '#9932CC', // DarkOrchid
            '#F0E68C', // Khaki
            '#DAA520', // GoldenRod
            '#3CB371', // Medium Sea Green
            '#FF6347', // Tomato
            '#4682B4', // SteelBlue
            '#F08080', // Light Coral
            '#FF4500', // Orange Red
            '#00CED1', // Dark Turquoise
            '#FA8072', // Salmon
            '#7FFF00', // Chartreuse
            '#FFEFD5', // Papaya Whip
            '#D2B48C', // Tan
            '#B0C4DE', // Light Steel Blue
            '#ADD8E6', // Light Blue
            '#20B2AA', // Light Sea Green
            '#FF4500', // Orange Red
            '#EEE8AA', // Pale Goldenrod
            '#FF6347', // Tomato Red
            '#48D1CC', // Medium Turquoise
            '#FF6347', // Tomato Red
            '#4682B4', // Steel Blue
            '#FF8C00', // Dark Orange
            '#00FF7F', // Spring Green
            '#E9967A', // Dark Salmon
            '#FA8072', // Salmon
            '#FFA07A', // Light Salmon
            '#20B2AA', // Light Sea Green
            '#FF6347', // Tomato Red
            '#FFD700', // Gold
            '#6A5ACD', // Slate Blue
            '#FFB6C1', // Light Pink
            '#9370DB', // Medium Purple
            '#4169E1', // Royal Blue
            '#DB7093', // Pale Violet Red
            '#87CEEB', // Sky Blue
            '#D8BFD8', // Thistle
            '#FFD700', // Gold
            '#6495ED', // Cornflower Blue
            '#FAF0E6', // Linen
            '#00FF00', // Lime
            '#FF6347', // Tomato
            '#4169E1', // Royal Blue
            '#FF4500', // Orange Red
            '#FFE4B5', // Moccasin
            '#32CD32', // Lime Green
            '#FFD700', // Gold
            '#FF69B4', // Hot Pink
            '#8A2BE2', // Blue Violet
            '#DC143C', // Crimson Red
            '#FF6347', // Tomato Red
            '#8FBC8F', // Dark Sea Green
            '#F4A460', // Sandy Brown
            '#FF6347', // Tomato Red
            '#4682B4', // Steel Blue
            '#FF4500', // Orange Red
            '#FFD700', // Gold
            '#00CED1', // Dark Turquoise
            '#D2691E', // Chocolate Brown
            '#DDA0DD', // Plum
            '#4169E1', // Royal Blue
            '#FFA07A', // Light Salmon
            '#8B0000', // Dark Red
            '#7CFC00', // Lawn Green
            '#FF6347', // Tomato Red
            '#40E0D0', // Turquoise
            '#32CD32', // Lime Green
            '#6495ED', // Cornflower Blue
        ];
        return modernColors[Math.floor(Math.random() * modernColors.length)];
    }


    const fireworksContainer = document.getElementById('fireworksContainer');
    const fireworks = new Fireworks(fireworksContainer, {
        speed: 2,
        acceleration: 1.05,
        friction: 0.98,
        gravity: 1,
        particles: 100,
        explosion: 5,
        opacity: 0.7,
        sound: false,
    });

    function showChosenPopup(name) {
        //show popup
        document.getElementById("popup-content").innerText = name;
        document.getElementById('popup').style.visibility = 'visible';
        fireworks.start();
        setTimeout(() => {
            fireworks.stop();
        }, 10000);
    }

    document.getElementById('closeBtn').addEventListener('click', function () {
        document.getElementById('popup').style.visibility = 'hidden';
        fireworks.stop();
    });
    document.getElementById('label-values').addEventListener('click', function (e) {
        this.classList.toggle('active');
        const isExpanded = this.classList.contains('active');
        this.setAttribute('aria-expanded', isExpanded);
        document.getElementById('values-content').style.display = isExpanded ? 'flex' : 'none';
        document.getElementById('short-values').style.display = !isExpanded ? 'flex' : 'none';
    });

    function toggleValues() {
        if (window.innerWidth <= 768) {
            const label = document.getElementById('label-values');
            label.classList.toggle('active');
            const isExpanded = label.classList.contains('active');
            label.setAttribute('aria-expanded', isExpanded);
            document.getElementById('values-content').style.display = isExpanded ? 'flex' : 'none';
            document.getElementById('short-values').style.display = !isExpanded ? 'flex' : 'none';
        }
    }

    toggleValues()
</script>
{{ end }}